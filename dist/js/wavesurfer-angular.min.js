!function(){"use strict";angular.module("wavesurfer.angular",[]).filter("hms",function(){return function(e){var n=parseInt(e,10),a=Math.floor(n/3600),l=Math.floor((n-3600*a)/60),r=n-3600*a-60*l;return a<10&&(a="0"+a),l<10&&(l="0"+l),r<10&&(r="0"+r),l+":"+r}}).directive("wavesurferAngular",function(e,n){var a=1;return{restrict:"AE",scope:{url:"=",options:"="},template:'<div class="row"><div class="col-xs-12 wave-control-wrap"><button class="bw-btn" ng-click="bw()"></button><button ng-class="{\'play-btn\': !playing, \'pause-btn\': playing}" ng-click="playpause()"></button><button class="ff-btn" ng-click="ff()"></button><span class="sound-duration pull-left"><span>{{moment | hms}}</span> / <span>{{length | hms}}</span></span><div class="waveform" id="{{::uniqueId}}"></div><span ng-class="{\'volume-100\' : volume_level > 50, \'volume-50\' : volume_level > 0 && volume_level <= 50, \'volume-0\' : volume_level === 0}" id="player"><span class="audio-volume" id="volume" style="width: 75%"></span></span></div></div>',link:function(l,r){var t=a++;l.uniqueId=l.options.id?l.options.id:"waveform_"+t,l.wavesurfer=Object.create(WaveSurfer),l.playing=!1,l.volume_level=n.sessionStorage.audioLevel||50,l.updateSlider=function(){$("#volume").slider({min:0,max:100,value:l.volume_level,range:"min",animate:!0,slide:function(e,a){l.volume_level=n.sessionStorage.audioLevel=a.value,l.wavesurfer.setVolume(l.volume_level/100)}})};var o=r.children()[0].children[0].children[4];l.options=_.extend({container:o},l.options),l.wavesurfer.init(l.options),l.updateSlider(),l.wavesurfer.load(l.url),l.moment="0",l.wavesurfer.on("ready",function(){l.length=Math.floor(l.wavesurfer.getDuration()).toString(),e(function(){l.moment=Math.floor(l.wavesurfer.getCurrentTime()).toString()},1e3*parseFloat(l.playrate))}),l.wavesurfer.on("finish",function(){l.playing=!1}),l.playpause=function(){l.wavesurfer.playPause(),l.playing=!l.playing},l.ff=function(){l.wavesurfer.skipForward()},l.bw=function(){l.wavesurfer.skipBackward()},l.$emit("wavesurferInit",l.wavesurfer)}}})}();